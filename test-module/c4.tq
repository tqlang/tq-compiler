from Std.Console import
from Std.Process import
from Std.Mem import
from Std.Fs import

let uint src
let uint debug

let []byte sym

@export("main") func main() void {
	
	let argv = getProgramArguments()
	let argc = argv.len as int

	let i = 1
	if ((argc - i) > 0 and argv[i][0] == '-' and argv[i] == "-s") src = i++
	if ((argc - i) > 0 and argv[i][0] == '-' and argv[i] == "-d") debug = i++
	if ((argc - i) < 1) {
		writeln("usage: c4 [-s] [-d] file ...")
		exit(1)
	}

	let file = open(argv[i])

	writeln("ok...")

	const uint poolsz = 256 * 1024
	sym = alloc(byte, poolsz, Alignment._1)

	write("allocation length is ")
	writeln(sym.len)
	writeln("Not bad untill here")

}
